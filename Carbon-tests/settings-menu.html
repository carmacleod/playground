<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Test Table settings menu button</title>
  <style>
    fieldset {
      border: 0;
      padding: 0;
    }
    ul {
      list-style: none;
      padding: 0;
    }
  </style>
  <script>
    var menuitems;
    function load() {
      menuitems = document.querySelectorAll('[role="menuitem"], [role="menuitemcheckbox"], [role="menuitemradio"]');
      var i = 0;
      menuitems.forEach(function (el) {
        console.log(el);
        el.itemindex = i++;
        el.onkeydown = handleKeydown;
      });
      menuitems[0].focus();
    }
    window.onload = load;

    function handleKeydown(e) {
      console.log(e.code + ' ' + e.target.itemindex);
      switch (e.code) {
        case 'ArrowDown': focusNextMenuitem(e.target.itemindex); e.preventDefault(); break;
        case 'ArrowUp': focusPreviousMenuitem(e.target.itemindex); e.preventDefault(); break;
      }
    }
    
    function focusNextMenuitem(currentIndex) {
      var nextMenuitem;
      if (currentIndex === menuitems.length - 1) {
        nextMenuitem = menuitems[0];
      } else {
        nextMenuitem = menuitems[currentIndex + 1];
      }
      nextMenuitem.focus();
    }
    
    function focusPreviousMenuitem(currentIndex) {
      var nextMenuitem;
      if (currentIndex === 0) {
        nextMenuitem = menuitems[menuitems.length - 1];
      } else {
        nextMenuitem = menuitems[currentIndex - 1];
      }
      nextMenuitem.focus();
    }
  </script>
</head>
<body>
  <main>
    <h1>Test Table settings menu button</h1>
    <ul role="menu" tabindex="-1" aria-label="Table settings">
    	<li role="none">
    		<fieldset aria-labelledby="row-height-label">
    		  <legend id="row-height-label" role="separator">Row height</legend>
  				<div>
  				   <input id="compact" type="radio" name="height" value="compact" role="menuitemradio" tabindex="-1">
  				   <label for="compact">Compact (24px)</label>
  				</div>
  				<div>
  				   <input id="short" type="radio" name="height" value="short" role="menuitemradio" tabindex="-1">
  				   <label for="short">Short (32px)</label>
  				</div>
  			  <div>
  			     <input id="normal" type="radio" name="height" value="normal" checked="" role="menuitemradio" tabindex="-1">
  			     <label for="normal">Normal (48px)</label>
  			  </div>
  		    <div>
  		       <input id="tall" type="radio" name="height" value="tall" role="menuitemradio" tabindex="-1">
  		       <label for="tall">Tall (64px)</label>
  		    </div>
    		</fieldset>
    	</li>
    	<li role="none">
      	<ul role="group" aria-labelledby="edit-columns-label">
        	<li id="edit-columns-label" role="separator">Edit columns</li>
      		<li role="none">
      			<input id="name" type="checkbox" checked role="menuitemcheckbox" tabindex="-1">
      			<label for="name">Name</label>
      		</li>
      		<li role="none">
      			<input id="tool_integrations" type="checkbox" role="menuitemcheckbox" tabindex="-1">
      			<label for="tool_integrations">Tool Integrations</label>
      		</li>
      		<li role="none">
      			<input id="tags" type="checkbox" checked role="menuitemcheckbox" tabindex="-1">
      			<label for="tags">Tags</label>
      		</li>
      		<li role="none">
      			<input id="status" type="checkbox" checked role="menuitemcheckbox" tabindex="-1">
      			<label for="status">Status</label>
      		</li>
      	</ul>
    	</li>
    	<li role="none">
        <button type="button" role="menuitem" tabindex="-1">Reset to default</button>
      </li>
    </ul>
  </main>
</body>
</html>